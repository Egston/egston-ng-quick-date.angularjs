!function(){var e=angular.module("ngQuickDate",[]);e.provider("ngQuickDateDefaults",function(){return{options:{stdWeek:!1,dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"Click to Set Date",hoverText:null,buttonIconHtml:null,closeButtonHtml:"&times;",nextLinkHtml:"Next &rarr;",prevLinkHtml:"&larr; Prev",disableTimepicker:!1,disableClearButton:!1,defaultTime:null,dayAbbreviations:["Su","M","Tu","W","Th","F","Sa"],dateFilter:null,timezone:null,debug:!1,parseDateFunction:function(e){e=Date.parse(e);return isNaN(e)?null:new Date(e)}},$get:function(){return this.options},set:function(e,t){var n,a,i;if("object"!=typeof e)return this.options[e]=t;for(n in a=[],e)i=e[n],a.push(this.options[n]=i);return a}}}),e.directive("quickDatepicker",["ngQuickDateDefaults","$filter","$sce","$log",function(E,U,L,B){return{restrict:"E",require:"?ngModel",scope:{dateFilter:"=?",disableTimepicker:"=?",disableClearButton:"=?",timezone:"=?",onChange:"&",required:"@",debug:"=?"},replace:!0,link:function(s,n,a,m){var e,r,t,i,p,l,u,g,f,h,D,v,o,c,d,k,b,T,w,y,F,$,C,q,I,M,V="00:00:00",S=function(e){if(s.debug)return B.debug("[quickdate] "+e)},H=new Date("2015-01-01T12:00Z"),x=function(){return b(),s.toggleCalendar(!1),s.weeks=[],s.inputDate=null,s.inputTime=null,s.invalid=!0,"string"==typeof a.initValue&&m.$setViewValue(a.initValue),k(),d()};return s.getDatePlaceholder=function(){return t(H,s.getDateFormat())},s.getTimePlaceholder=function(){return t(H,s.getTimeFormat())},s.getDateFormat=function(){return o()?"yyyy-MM-dd":s.dateFormat},s.getTimeFormat=function(){return o()?"HH:mm:ss":s.timeFormat},s.getLabelFormat=function(){var e;return null!=(e=s.labelFormat)?e:s.disableTimepicker?s.getDateFormat():s.getDateFormat()+" "+s.getTimeFormat()},i=!(b=function(){var e,t;for(e in E)E[e],e.match(/[Hh]tml/)?s[e]=L.trustAsHtml(E[e]||""):null==s[e]&&(s[e]=null!=(t=a[e])?t:E[e]);if(a.iconClass&&a.iconClass.length)return s.buttonIconHtml=L.trustAsHtml(`<i ng-show='iconClass' class='${a.iconClass}'></i>`)}),window.document.addEventListener("click",function(e){return s.calendarShown&&!i&&(s.toggleCalendar(!1),s.$apply()),i=!1}),angular.element(n[0])[0].addEventListener("click",function(e){return i=!0}),d=function(){var e=m.$modelValue?c(m.$modelValue):null;return I(),y(e),s.mainButtonStr=e?t(e,s.getLabelFormat()):s.placeholder,s.invalid=m.$invalid},y=function(e){return null!=e?(s.inputDate=t(e,s.getDateFormat()),s.inputTime=t(e,s.getTimeFormat())):(s.inputDate=null,s.inputTime=null)},k=function(e=null){e=null!=e?new Date(e):new Date;return"Invalid Date"===e.toString()&&(e=new Date),T(e,1),s.calendarDate=e},I=function(){var e,t,n,a,i,r,l,u,o,c,d=f(s.calendarDate);for(s.stdWeek&&(d=d?d-1:6),i=h(D(s.calendarDate),v(s.calendarDate)),i=Math.ceil((d+i)/7),c=[],e=new Date(s.calendarDate),T(e,g(e)+-1*d),l=n=0,r=i-1;0<=r?n<=r:r<=n;l=0<=r?++n:--n)for(c.push([]),a=0;a<=6;++a)t=new Date(e),q(t,V),u=m.$modelValue&&t&&p(t,m.$modelValue),o=p(t,new Date),c[l].push({date:t,selected:u,disabled:"function"==typeof s.dateFilter&&!s.dateFilter(t),other:v(t)!==v(s.calendarDate),today:o}),T(e,g(e)+1);return s.weeks=c},m.$parsers.push(function(e){return s.required&&null==e?(m.$setValidity("required",!1),null):angular.isDate(e)?(m.$setValidity("required",!0),e):angular.isString(e)?(m.$setValidity("required",!0),s.parseDateFunction(e)):null}),m.$formatters.push(function(e){return angular.isDate(e)?e:angular.isString(e)?s.parseDateFunction(e):void 0}),o=function(){return"UTC"===s.timezone},g=function(e){return o()?e.getUTCDate():e.getDate()},f=function(e){return o()?e.getUTCDay():e.getDay()},D=function(e){return o()?e.getUTCFullYear():e.getFullYear()},v=function(e){return o()?e.getUTCMonth():e.getMonth()},T=function(e,t){return o()?e.setUTCDate(t):e.setDate(t)},w=function(e,t){return o()?e.setUTCHours(t):e.setHours(t)},F=function(e,t){return o()?e.setUTCMinutes(t):e.setMinutes(t)},$=function(e,t){return o()?e.setUTCMonth(t):e.setMonth(t)},C=function(e,t){return o()?e.setUTCSeconds(t):e.setSeconds(t)},q=function(e,t){var n,t=(null!=t?t:V).split(":");return w(e,null!=(n=t[0])?n:0),F(e,null!=(n=t[1])?n:0),C(e,null!=(n=t[2])?n:0),e},e=function(e,t){return new Date($(new Date(e),v(e)+t))},t=function(e,t){return U("date")(e,t,s.timezone)},M=function(e){return"string"==typeof e?c(e):e},c=E.parseDateFunction,r=function(e,t){return o()?e+`T${t}Z`:e+" "+t},p=function(e,t,n=!1){return n?e-t==0:(e=M(e),t=M(t),e&&t&&D(e)===D(t)&&v(e)===v(t)&&g(e)===g(t))},l=function(e,t){return!(!e||!t)&&parseInt(e.getTime()/6e4)===parseInt(t.getTime()/6e4)},h=function(e,t){return[31,e%4==0&&e%100!=0||e%400==0?29:28,31,30,31,30,31,31,30,31,30,31][t]},u=function(e,t){var n,a,i,r,l=n=a=r=i=null,u=function(){var e=+new Date-r;return l=e<t&&0<e?setTimeout(u,t-e):null};return function(){return a=this,n=arguments,r=+new Date,l||(l=setTimeout(u,t),i=e.apply(a,n),a=n=null),i}},m.$render=function(){return k(m.$viewValue),d()},m.$viewChangeListeners.unshift(function(){if(k(m.$viewValue),d(),s.onChange)return s.onChange()}),s.$watch("calendarShown",function(e,t){if(e)return angular.element(n[0].querySelector(".quickdate-date-input"))[0].select(),d()}),s.$watch("timezone",function(e,t){if(e!==t)return m.$render()}),s.$watch("disableTimepicker",function(e,t){if(e!==t)return d()}),s.toggleCalendar=u(function(e){return angular.element(n).attr("disabled")&&(e=!1),isFinite(e)?s.calendarShown=e:s.calendarShown=!s.calendarShown},150),s.selectDate=function(e,t=!0){return S("selectDate: "+(null!=e?e.toISOString():void 0)),!m.$viewValue&&e||m.$viewValue&&!e||e&&m.$viewValue&&(e.getTime(),m.$viewValue.getTime()),!("function"==typeof s.dateFilter&&!s.dateFilter(e))&&(m.$setViewValue(e),t&&s.toggleCalendar(!1),!0)},s.selectDateWithMouse=function(e){return s.inputDate=t(e,s.getDateFormat()),s.selectDateFromInput(s.disableTimepicker)},s.selectDateFromInput=function(e=!1){var t,n,a,i;try{if(null==(n=c(r(s.inputDate,s.defaultTime||V))))throw new Error("Invalid Date");if(!s.disableTimepicker&&null!=(t=s.inputTime)&&t.length){if(i=s.disableTimepicker?V:s.inputTime,null==(a=c(r(s.inputDate,i))))throw new Error("Invalid Time");n=a}if(l(m.$viewValue,n)||s.selectDate(n,!1))return e&&s.toggleCalendar(!1),s.inputDateErr=!1,s.inputTimeErr=!1;throw new Error("Invalid Date")}catch(e){if("Invalid Date"===(t=e).message)return s.inputDateErr=!0;if("Invalid Time"===t.message)return s.inputTimeErr=!0}},s.onDateInputTab=function(){return s.disableTimepicker&&s.toggleCalendar(!1),!0},s.onTimeInputTab=function(){return s.toggleCalendar(!1),!0},s.nextMonth=function(){return k(e(s.calendarDate,1)),d()},s.prevMonth=function(){return k(e(s.calendarDate,-1)),d()},s.clear=function(){return s.selectDate(null,!0)},x()},template:`<div class='quickdate'>
  <a href='' ng-focus='toggleCalendar()' ng-click='toggleCalendar()'
      class='quickdate-button' title='{{hoverText}}'><div ng-hide='iconClass' ng-bind-html='buttonIconHtml'></div>{{mainButtonStr}}</a>
  <div class='quickdate-popup' ng-class='{open: calendarShown}'>
    <a href='' tabindex='-1' class='quickdate-close' ng-click='toggleCalendar()'>
      <div ng-bind-html='closeButtonHtml'></div>
    </a>
    <div class='quickdate-text-inputs'>
      <div class='quickdate-input-wrapper'>
        <label>Date</label>
        <input class='quickdate-date-input' ng-class="{'ng-invalid': inputDateErr}"
               name='inputDate' type='text' ng-model='inputDate'
               placeholder='{{ getDatePlaceholder() }}'
               ng-enter="selectDateFromInput(true)"
               ng-blur="selectDateFromInput(false)"
               on-tab='onDateInputTab()' />
      </div>
      <div class='quickdate-input-wrapper' ng-hide='disableTimepicker'>
        <label>Time</label>
        <input class='quickdate-time-input'
               ng-class="{'ng-invalid': inputTimeErr}"
               name='inputTime'
               type='text'
               ng-model='inputTime'
               placeholder='{{ getTimePlaceholder() }}'
               ng-enter="selectDateFromInput(true)"
               ng-blur="selectDateFromInput(false)"
               on-tab='onTimeInputTab()'>
      </div>
    </div>
    <div class='quickdate-calendar-header'>
      <a href='' class='quickdate-prev-month quickdate-action-link' tabindex='-1' ng-click='prevMonth()'>
        <div ng-bind-html='prevLinkHtml'></div>
      </a>
      <span class='quickdate-month'>{{calendarDate | date:'MMMM yyyy'}}</span>
      <a href='' class='quickdate-next-month quickdate-action-link' ng-click='nextMonth()' tabindex='-1' >
        <div ng-bind-html='nextLinkHtml'></div>
      </a>
    </div>
    <table class='quickdate-calendar'>
      <thead>
        <tr>
          <th ng-repeat='day in dayAbbreviations'>{{day}}</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat='week in weeks'>
          <td ng-mousedown='selectDateWithMouse(day.date)'
              ng-click='$event.preventDefault()'
              ng-class='{"other-month": day.other, "disabled-date": day.disabled, "selected": day.selected, "is-today": day.today}'
              ng-repeat='day in week'>{{day.date | date:'d':timezone}}</td>
        </tr>
      </tbody>
    </table>
    <div class='quickdate-popup-footer'>
      <a href='' class='quickdate-clear' tabindex='-1' ng-hide='disableClearButton' ng-click='clear()'>Clear</a>
    </div>
  </div>
</div>`}}]),e.directive("ngEnter",function(){return function(t,e,n){return e.bind("keydown keypress",function(e){if(13===e.which)return t.$apply(n.ngEnter),e.preventDefault()})}}),e.directive("onTab",function(){return{restrict:"A",link:function(t,e,n){return e.bind("keydown keypress",function(e){if(9===e.which&&!e.shiftKey)return t.$apply(n.onTab)})}}})}.call(this);